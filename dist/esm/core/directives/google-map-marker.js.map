{"version":3,"sources":["core/directives/google-map-marker.ts"],"names":[],"mappings":"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","file":"core/directives/google-map-marker.js","sourcesContent":["import {AfterContentInit, ContentChild, Directive, EventEmitter, OnChanges, OnDestroy, SimpleChange} from '@angular/core';\nimport {Subscription} from 'rxjs/Subscription';\n\nimport {MouseEvent} from '../map-types';\nimport * as mapTypes from '../services/google-maps-types';\nimport {MarkerManager} from '../services/managers/marker-manager';\n\nimport {SebmGoogleMapInfoWindow} from './google-map-info-window';\n\nlet markerId = 0;\n\n/**\n * SebmGoogleMapMarker renders a map marker inside a {@link SebmGoogleMap}.\n *\n * ### Example\n * ```typescript\n * import {Component} from 'angular2/core';\n * import {SebmGoogleMap, SebmGoogleMapMarker} from 'angular2-google-maps/core';\n *\n * @Component({\n *  selector: 'my-map-cmp',\n *  directives: [SebmGoogleMap, SebmGoogleMapMarker],\n *  styles: [`\n *    .sebm-google-map-container {\n *      height: 300px;\n *    }\n * `],\n *  template: `\n *    <sebm-google-map [latitude]=\"lat\" [longitude]=\"lng\" [zoom]=\"zoom\">\n *      <sebm-google-map-marker [latitude]=\"lat\" [longitude]=\"lng\" [label]=\"'M'\">\n *      </sebm-google-map-marker>\n *    </sebm-google-map>\n *  `\n * })\n * ```\n */\n@Directive({\n  selector: 'sebm-google-map-marker',\n  inputs: [\n    'latitude', 'longitude', 'title', 'label', 'draggable: markerDraggable', 'iconUrl',\n    'openInfoWindow', 'fitBounds', 'iconAnchorX', 'iconAnchorY', 'iconScaledSizeX', 'iconScaledSizeY'\n  ],\n  outputs: ['markerClick', 'dragEnd']\n})\nexport class SebmGoogleMapMarker implements OnDestroy, OnChanges, AfterContentInit {\n  /**\n   * The latitude position of the marker.\n   */\n  latitude: number;\n\n  /**\n   * The longitude position of the marker.\n   */\n  longitude: number;\n\n  /**\n   * The title of the marker.\n   */\n  title: string;\n\n  /**\n   * The label (a single uppercase character) for the marker.\n   */\n  label: string;\n\n  /**\n   * If true, the marker can be dragged. Default value is false.\n   */\n  draggable: boolean = false;\n\n  /**\n   * Icon (the URL of the image) for the foreground.\n   */\n  iconUrl: string;\n\n  /**\n   * Whether to automatically open the child info window when the marker is clicked.\n   */\n  openInfoWindow: boolean = true;\n  \n  iconAnchorX: number;\n  iconAnchorY: number;\n  iconScaledSizeWidth: number;\n  iconScaledSizeHeight: number;\n\n  public getIcon() {\n    let icon: any = {};\n    if (this.iconUrl) {\n      icon.url = this.iconUrl;\n    }\n    if (this.iconAnchorX && this.iconAnchorY) {\n      icon.anchor = {x: this.iconAnchorX, y: this.iconAnchorY}\n    }\n    if (this.iconScaledSizeWidth && this.iconScaledSizeHeight) {\n      icon.scaledSize = {width: this.iconScaledSizeWidth, height: this.iconScaledSizeHeight}\n    }\n    return icon;\n  }\n\n  /**\n   * This event emitter gets emitted when the user clicks on the marker.\n   */\n  markerClick: EventEmitter<void> = new EventEmitter<void>();\n\n  /**\n   * This event is fired when the user stops dragging the marker.\n   */\n  dragEnd: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\n\n  @ContentChild(SebmGoogleMapInfoWindow) private _infoWindow: SebmGoogleMapInfoWindow;\n\n  private _markerAddedToManger: boolean = false;\n  private _id: string;\n  private _observableSubscriptions: Subscription[] = [];\n\n  constructor(private _markerManager: MarkerManager) { this._id = (markerId++).toString(); }\n\n  /* @internal */\n  ngAfterContentInit() {\n    if (this._infoWindow != null) {\n      this._infoWindow.hostMarker = this;\n    }\n  }\n\n  /** @internal */\n  ngOnChanges(changes: { [key: string]: SimpleChange }) {\n    if (typeof this.latitude !== 'number' || typeof this.longitude !== 'number') {\n      return;\n    }\n    if (!this._markerAddedToManger) {\n      this._markerManager.addMarker(this);\n      this._markerAddedToManger = true;\n      this._addEventListeners();\n      return;\n    }\n    if (changes['latitude'] || changes['longitude']) {\n      this._markerManager.updateMarkerPosition(this);\n    }\n    if (changes['title']) {\n      this._markerManager.updateTitle(this);\n    }\n    if (changes['label']) {\n      this._markerManager.updateLabel(this);\n    }\n    if (changes['draggable']) {\n      this._markerManager.updateDraggable(this);\n    }\n    if (changes['iconUrl']) {\n      this._markerManager.updateIcon(this);\n    }\n    if (changes['iconAnchorX']) {\n      this._markerManager.updateIcon(this);\n    }\n    if (changes['iconAnchorY']) {\n      this._markerManager.updateIcon(this);\n    }\n    if (changes['iconSize']) {\n      this._markerManager.updateIcon(this);\n    }\n  }\n\n  private _addEventListeners() {\n    const cs = this._markerManager.createEventObservable('click', this).subscribe(() => {\n      if (this.openInfoWindow && this._infoWindow != null) {\n        this._infoWindow.open();\n      }\n      this.markerClick.emit(null);\n    });\n    this._observableSubscriptions.push(cs);\n\n    const ds = this._markerManager.createEventObservable<mapTypes.MouseEvent>('dragend', this)\n      .subscribe((e: mapTypes.MouseEvent) => {\n        this.dragEnd.emit({ coords: { lat: e.latLng.lat(), lng: e.latLng.lng() } });\n      });\n    this._observableSubscriptions.push(ds);\n  }\n\n  /** @internal */\n  id(): string { return this._id; }\n\n  /** @internal */\n  toString(): string { return 'SebmGoogleMapMarker-' + this._id.toString(); }\n\n  /** @internal */\n  ngOnDestroy() {\n    this._markerManager.deleteMarker(this);\n    // unsubscribe all registered observable subscriptions\n    this._observableSubscriptions.forEach((s) => s.unsubscribe());\n  }\n}\n"],"sourceRoot":"/source/"}